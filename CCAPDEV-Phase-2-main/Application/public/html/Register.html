<html>
    <!--This is the registration form for Students. My idea is that this html form submits to the database, and the database
    automatically records any registration coming from this form as a student. So it just adds the attribute student after 
    checking where the data values came from.-->
    <title>Register</title>

    <head>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <link rel="stylesheet" href="template.css">
    </head>

    <body class="background">
        <div class="reg main">
            Information entered here will only be strictly used for<br>
            the purpose of this website and will not be shared<br>
            to the public.<br><br>

            <form method="POST">
                <label for="fName">First Name:</label>
                <input type="text" id = "firstName" class="infoReg" name = "fName"><br>
                <br><label for="lName">Last Name:</label>
                <input type="text" id = "lastName" class="infoReg" name = "lName"><br>
                <br><label for="dob">Date of Birth:</label>
                <input type="date" id = "dateOfBirth" class="infoReg" name = "birth"><br>
                <br><label for="uName">Username:</label>
                <input type="text" id = "userName" class="infoReg" name = "user"><br>
                <br><label for="password">Password:</label>
                <input type="password" id = "password" class="infoReg" name = "password"><br><br>
                <button type="button" id="login" onClick="Login()">Sign in</button> 
                <button type="submit" id="register">Register</button>
            </form>
        </div>

        <script>
            // const registeredUsersString = localStorage.getItem('registeredUsers');//Retrieve from local storage
            
            // console.log(registeredUsers);

            function Login(){
                $(location).attr("href", "Login.html");
            }

            $("#register").click(function(){
                const registeredUsersString = [];
                var firstName = $("#firstName").val();//Get firstName value in input tag id firstName
                var lastName = $("#lastName").val();//Get lastName value in input tag id lastName
                var dateOfBirth = $("#dateOfBirth").val();//Get dateOfBirth value in input tag id dateOfBirth
                var userName = $("#userName").val();//Get userName value in input tag id userName
                var password = $("#password").val();//Get password value in input tag id password
                const registeredUser = {//Create an instance of a registered user and set its values
                    firstName: firstName,
                    lastName: lastName,
                    dateOfBirth: dateOfBirth,
                    userName: userName,
                    password: password
                };
                registeredUsersString.push(registeredUser);
                
                $.post('../../routes.js', {
                    registeredUsersString : JSON.stringify(registeredUsers)
                },
                function(data, status){
                    alert("Data: " + data + "\nStatus: " + status);
                });
                $(location).attr("href", "Login.html");
            });
                
            // function Register(){
            //     console.log("Registered User!");
                
            //     console.log(registeredUsers);
            //     console.log(registeredUser);
            //     registeredUsers.push(registeredUser);//Push the registered user inside the array registeredUsers
                
            //     localStorage.setItem('registeredUsers', registeredUsersString);//Transfer to local storage
            //     console.log(registeredUsersString);
            // }
        </script>
    </body>
</html>
